<script>
var parentWindowId = null;
  	chrome.extension.onRequest.addListener(
  		function(request, sender, sendResponse) 
  		{
			console.log("in background callback");
			if (request.name == "togglePlayback" || request.name == "next" || request.name == "previous" || request.name == "replayCurrent") {
				console.log("request dispatched: " + request.name);
				chrome.tabs.getAllInWindow(null, function(tabs){
				    for (var i = 0; i < tabs.length; i++) {
				    	var windowUrl = tabs[i].url;
						console.log("url: " + windowUrl);
						if(windowUrl.indexOf("youtube")>0){
							console.log("found youtube tab! ");
							chrome.tabs.sendRequest(tabs[i].id, {name: request.name});
						}                   
				    }
				});
			}

			sendResponse({});
		 }
	);
</script>
